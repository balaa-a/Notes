# B-spline 曲线定义

给定$n+1$个控制点$\rm{P_0,P_1,...,p_n}$和一个节点向量$U=\{u_0,u_1,...,u_m\}$，则$p$次B-spline曲线定义为

![img](https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/B-spline/bspline-curve-eqn.jpg)

其中$N_{i,p}(u)$是$p$次B-spline曲线的基函数。B-spaline曲线与贝塞尔曲线的生成类似，但是B-spline包含了更多信息，即包含了$n+1$个控制点，$m+1$个节点，以及一个次数$p$。注意，$n,m,p$三者需要满足$m=n+p+1$，更准确的说，如果我们要通过$n+1$个控制点定义一个$p$次B-spline曲线，则必须要提供$n+p+2$个节点。换句话说，如果已经给定节点向量长度为$m+1$，控制点个数为$n+1$，那么对应的B-spline的次数$p$一定是$p=m-n-1$。曲线上节点$u_i$对应的点为$C(u_i)$，也即节点点。因此，节点点将整个B-spline曲线划分为多个曲线段，每个定义在一个特定的节点区间上。我们将在[节点插入——细分B-spline曲线](./6.5 节点插入.md)章节将证明这些曲线段都是$p$贝塞尔曲线。

虽然$N_{i,p}(u)$很想$B_{n,i}(u)$，但是B-spline基函数的次数是输入，需要手动指定，而贝塞尔基函数的次数取决于控制点个数。要改变B-spline的曲线形状，可以修改以下控制参数的一个或多个：控制点、节点和曲线的次数。

如果节点向量没有特别指定，则生成的曲线将不会接触控制多边形的首尾两条线段，正如下图左所示。这种类型的B-spline曲线成为开放B-spline曲线。如果我们需要B-spline曲线像贝塞尔曲线那样以首尾控制点为首尾并相切，我们必须将第一个节点和最后一个节点重复$p+1$次，也即收尾节点的重数为$p+1$，这被称为钳型B-spline曲线，正如下图中所示。通过重复某些节点和控制点，还可以生成如下图右所示的闭合曲线，在此情况下，生成曲线的起点与终点连在一起形成一个闭环。本笔记中，我们主要讨论钳型曲线。

<img src="/home/balaa/Pictures/typora/image-20220911155629206.png" alt="image-20220911155629206" style="zoom:80%;" />