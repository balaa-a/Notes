# 为什么需要B样条

考虑设计花瓶的轮廓。下图左图是11次的贝塞尔曲线，但是我们很难将花瓶脖子处线段 $P_4P_5$再弯曲。当然，我们可以在该段附近添加更多控制点，以增加该区域的权重。但是，这会增加曲线的次数。在许多情况下，并无必要使用高次数的曲线。

![image-20220908164711452](/home/balaa/Pictures/typora/image-20220908164711452.png)

正如[前面章节关于贝塞尔曲线的导数](./5.5 贝塞尔曲线的导数.md)所讨论的，我们可以将两条贝塞尔曲线连接在一起。只要第一条曲线的最后一条线和第二条曲线的第一条线具有相同的方向，我们至少可以实现$G^1$连续性，因为切向量具有相同的方向但可能具有不同的长度（如果长度也相同，则变成$C^1$连续）。上图中间就是使用了这个思路。它具有三个 3 次贝塞尔曲线段，连接点用黄色矩形标记。这表明，通过满足$G^1$连续条件的多个低阶 Bézier 曲线段，我们仍然可以设计复杂的形状。但是，保持这种$G^1$连续条件可能是无趣且不可取的。

我们是否仍然可以使用较低阶的曲线段而不必担心$G^1$连续条件？B样条曲线是贝塞尔曲线的推广，是为了回答这个问题而开发的。上图右图是由 8 个控制点定义的 3 次 B 样条曲线。事实上，其是由五个 3 次贝塞尔曲线段连接在一起所形成的由控制点定义的 B 样条曲线。在上面，这些小点将 B 样条曲线细分为贝塞尔曲线段。和贝塞尔曲线类似，我们也可以移动控制点来修改曲线的形状，还可以修改曲线的细分。因此，B样条曲线对于曲线设计提供了更高的自由度。

直接细分曲线是很难做到的，然而我们可以细分曲线的域来细分曲线。如果曲线的域是 [0,1]，则此闭合区间可以通过节点进行细分。令这些节点为$0\le u_0\le u_1\le ...\le u_m\le 1$，则点$C(u_i)$对曲线进行了细分。因此修改 [0,1] 的细分，改变了曲线的形状。

![img](https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/B-spline/knot-division.jpg)

综上所述，要设计一条 B 样条曲线，我们需要一组控制点、一组节点和一组系数，使所有曲线段连接在一起，满足一定的连续性条件。系数的计算可能是最复杂的步骤，因为它们必须确保某些连续性条件。幸运的是，本课程通常不需要这种计算，我们只需要知道它们的特征就可以推理 B 样条曲线。